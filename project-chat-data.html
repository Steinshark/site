
<!-- Header - Gives mobile better viewability -->
  <header>
    <div><strong>RL-HF</strong></div>
    <nav class="navbar">
        <!-- Desktop Menu -->
        <ul class="menu desktop-menu">
          <li><a href="index.html">Home</a></li>
          <li><a href="projects.html">Projects</a></li>
          <li><a href="chat.html">Chatbot</a></li>
          <li><a href="project-chat-data.html">Teach Model</a></li>
        </ul>

        <!-- Mobile Menu -->
        <div class="mobile-menu">
          <ul class="menu mobile-menu">
          <li><a href="index.html">Home</a></li>
          <li><a href="projects.html">Projects</a></li>
          <li><a href="chat.html">Chatbot</a></li>
        </ul>
        </div>
      </nav>
    <div class="code-stream"></div>
  </header>



<h1 class="page-title">
  Help Train an AI Assistant with RLHF (Reinforcement Learning from Human Feedback)
</h1>

<p class="intro-text">
  Join our open research project and contribute to the future of AI!  
  By comparing and ranking different chatbot responses, you'll provide valuable human feedback 
  that helps improve large language models (LLMs) after pretraining.  
  This process, called <strong>Reinforcement Learning from Human Feedback (RLHF)</strong>, is 
  essential for making AI assistants more accurate, helpful, and aligned with real user needs.  
  Select the best response below and help shape the next generation of AI assistants.
</p>

<style>
.page-title {
  text-align: center;
  margin-top: 2rem;
  font-size: 1.8rem;
}

.intro-text {
  margin: 0 auto;
  margin-top: 2rem;
  max-width: 800px;
  font-size: 1.1rem;
  line-height: 1.6;
  text-align: left;
}
</style>

<div class="container">
  <div class="original-prompt" id="original-prompt">Loading prompt...</div>
  <div class="options">
    <div class="option" id="option-a">Option A</div>
    <div class="option" id="option-b">Option B</div>
  </div>
</div>
<link rel="stylesheet" href="styles.css" />
<style>
.container {
  max-width: 700px;
  margin: 2rem auto;
  padding: 1rem;
  display: flex;
  flex-direction: column;
  gap: 1.5rem;
  font-family: Arial, sans-serif;
}

.original-prompt {
  font-size: 1.2rem;
  background-color: var(--panel-dark, #222);
  padding: 1rem;
  border-radius: 8px;
  border-left: 4px solid #00c3ff;
}

.options {
  display: flex;
  flex-direction: column;
  gap: 1rem;
}

.option {
  background-color: var(--panel-dark, #8f8f8f);
  padding: 1rem;
  border-radius: 8px;
  cursor: pointer;
  transition: transform 0.1s ease, background 0.2s ease;
  border: 2px solid transparent;
}

.option:hover {
  background-color: #fff8dc;
  transform: scale(1.02);
  color:black;
}

.option.selected {
  border-color: #00c3ff;
}
</style>

<script>
const optionA = document.getElementById('option-a');
const optionB = document.getElementById('option-b');
const originalPrompt = document.getElementById('original-prompt');

let currentData = null; // store the current prompt data

async function loadPrompt() {
  try {
    const response = await fetch("https://api.hipowerpc.com/api/rlhf-next", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ request_type: "next_prompt" })
    });

    const data = await response.json();
    currentData = data;

    originalPrompt.textContent = data.prompt;
    optionA.textContent = "A: " + data.option_a;
    optionB.textContent = "B: " + data.option_b;

    optionA.classList.remove("selected");
    optionB.classList.remove("selected");
  } catch (err) {
    console.error("Failed to fetch prompt:", err);
    originalPrompt.textContent = "Failed to load prompt.";
  }
}

async function submitSelection(choice) {
  if (!currentData) return;

  try {
    await fetch("https://api.hipowerpc.com/api/rlhf-submit", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ ...currentData, choice })
    });
    loadPrompt();
  } catch (err) {
    console.error("Failed to submit choice:", err);
  }
}

// Click handlers
optionA.addEventListener('click', () => {
  optionA.classList.add('selected');
  optionB.classList.remove('selected');
  submitSelection("option_a");
});

optionB.addEventListener('click', () => {
  optionB.classList.add('selected');
  optionA.classList.remove('selected');
  submitSelection("option_b");
});

// Initial load
loadPrompt();
</script>

<script>
  // Toggle main mobile menu
  const toggle = document.querySelector('.menu-toggle');
  const mobileMenu = document.querySelector('.mobile-menu');

  toggle.addEventListener('click', () => {
    mobileMenu.classList.toggle('active');
  });

  // Toggle submenu in mobile menu
  const mobileSubmenus = document.querySelectorAll('.mobile-menu .has-submenu > a');
  mobileSubmenus.forEach(link => {
    link.addEventListener('click', (e) => {
      e.preventDefault();
      link.parentElement.classList.toggle('active');
    });
  });
</script>
